<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
    <title><%: Page.Title %> - Dealertrack</title>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width" />
    <!-- Bootstrap 3.2  CSS-->
    <link href="/static/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <!-- Custom  CSS-->
    <link href="/static/css/styles.min.css" rel="stylesheet" />
    <link href="/static/css/checkbox.min.css" rel="stylesheet" />
    <link href="/static/css/docslist/styles.min.css" rel="stylesheet" />
</head>
<body ng-app="docsListApp">
    {% verbatim %}
    <nav class="navbar navbar-default navbar-fixed-top  navbar-header-style ng-cloak" role="navigation" ng-controller="HeaderCtrlr" ng-cloak>
        <!-- navbar container -->
        <div id="id_document_contract_nav" class="">
            <!--  navbar-brand name center align -->
            <span class="navbar-brand">{{headerText}}</span>

            <!-- navbar left -->
            <ul class="nav navbar-nav navbar-left">
                <li>
                    <a href="#" class="navbar-style" id="back-lnk">
                        <i class="fa fa-chevron-left back-icon-style"></i>
                        &nbsp;Back
                    </a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-left" ng-show="isAnyDocSelected">
                <li>
                    <button type="button" class="btn btn-link left-sign-style" id="id_Sign_btn" ng-disabled="isNoSignableDocsFound" ng-click="onSelectSigners();">Sign</button>
                </li>
                <li>
                    <a href="#" class="fa fa-print fa-2x print-navbar" ng-click="onPrintClicked();"></a>
                </li>
            </ul>
        </div>
    </nav>
    <div id="body" class="container ng-cloak" ng-controller="DocsListCtrlr" ng-cloak>
        <div class="row clearfix">
            <!-- Main Content -->
            <div id="docs-list-container" class="col-md-12">
                <div id="data-loading-indicator" class="col-md-offset-3 col-md-6 col-md-offset-3 text-center" ng-hide="dataLoaded || apiCallFailed">
                    <img src="/static/images/loading-tr.gif" />
                    Loading data. One moment...
                </div>
                <div id="data-retrieval-error" ng-show="apiCallFailed" class="panel panel-danger">
                    <div class="panel-body text-center">
                        Unable to retrieve the data. Please tap on '< Back' link to return to Contract Status and refresh the information about eContract then return to this page to see if updated information is available.
                    </div>
                </div>
                <h3 class="dtc_user">{{customers}}</h3>
                <div class="document" ng-repeat="doc in documents" docs-repeat-completed>
                    <a ng-show="doc.IsSignable" class="status-badge" id="signing-status-for-{{doc.TemplateTypeID}}" ng-click="onRibbonClicked($index);" ng-class="doc.RibbonColor">
                        <div class="status">
                            {{doc.SigningStatus}}
                        </div>
                    </a>
                    <a ng-hide="doc.IsSignable" class="status-badge" ng-click="onRibbonClicked($index);" ng-class="doc.RibbonColor">
                        <div class="status">
                            {{doc.SigningStatus}}
                        </div>
                    </a>
                    <div class="doc-selected-wrapper" ng-click="onDocSelected($index);">
                        <div class="roundedTwo docSelector">
                            <input type="checkbox" value="None" id="doc-{{$index}}-cbx" name="doc-{{$index}}-cbx" disabled="disabled" ng-checked="doc.IsSelected" />
                            <label for="doc-{{$index}}-cbx"></label>
                        </div>
                    </div>
                    <div class="doc-body" id="doc-body-{{doc.DocIndexId}}" ng-click="onDocBodyClicked(doc.DocIndexId, doc.TemplateDescription);">
                        <img class="doc-icon" src="/static/images/doc_iconX2.png" width="104" height="134" />
                        <p class="text-center doc-title"><strong>{{doc.TemplateDescription}}</strong></p>
                    </div>
                    <div id="signeesFor{{doc.TemplateTypeID}}" style="display: none">
                        <ul>
                            <li ng-repeat="signee in doc.Signers" ng-class="{'last':$last}">
                                <div>
                                    <span class="ellipsis pull-left">{{signee.FullName}} ({{signee.Type}})</span>
                                    <span class="signed-status-style pull-right" ng-class="signee.SignStatus=='Signed' && 'signed-color' || 'not-signed-color'">{{signee.SignStatus}}</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="doc-mix-warning" class="modal child-modal" role="dialog" data-backdrop="static">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header alert alert-warning">
                            Attention
                        </div>
                        <div class="modal-body text-justify">Some of the documents selected have already been signed, and will not be sent for signing</div>
                        <div class="modal-footer text-center">
                            <button type="button" class="close" data-dismiss="modal">OK</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="doc-preview-overlay" class="modal" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                            <h4></h4>
                        </div>
                        <div class="modal-body">
                        </div>
                    </div>
                </div>
            </div>
            <div id="remote-call-failed-msg-box" class="modal child-modal" role="dialog" data-backdrop="static">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-body text-center">
                        </div>
                        <div class="modal-header text-center">
                            <button type="button" class="btn btn-link" data-dismiss="modal">OK</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="doc-removal-notice" class="modal child-modal" role="dialog" data-backdrop="static">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header text-left alert alert-warning">Attention</div>
                        <div class="modal-body text-justify">One or more of the documents has no signer selected, and will not be sent for signing.
                        </div>
                        <div class="modal-footer text-center">
                            <button type="button" class="btn btn-link pull-left close" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-link pull-right close" ng-click="onOkToRemoveDocsWOSingers();">OK</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- select-signer-modal -->
            <div class="modal" data-keyboard="false" data-backdrop="static" id="signers-container" tabindex="-1" role="dialog" aria-labelledby="select_signer_modal" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content signer-modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12 modal-header-wrapper">
                                    <button class="btn btn-link cancel-link pull-left" data-dismiss="modal">Cancel</button>
                                    <p class="modal-title modal-text">Select signer(s)</p>
                                    <button class="btn btn-link pull-right continue-link" type="button" ng-click="onContinueClick();" ng-disabled="selectedSigners.length==0">Continue</button>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body signer-modal-body">
                            <ul class="row list-inline signers-list" ng-class="'room-for-'+signers.length">
                                <li ng-repeat="signer in signers" class="col-sm-4 modal-body-wrapper signers-list-item signer-{{signer.Type.toLowerCase()}}" ng-click="onSignerSelected($index, $event);">
                                    <div class="signer">
                                        <div class="thumbnail signer-thumbnail">
                                            <div class="fa fa-user fa-3x user-icon"></div>
                                            <div class="caption text-center thumbnail_caption modal-text">
                                                <div class="ellipsis multiline" style="width:90px;height:35px;">{{signer.FullName}}</div>
                                                <p>({{signer.Type}})</p>
                                            </div>
                                        </div>
                                        <div class="caption text-center">
                                            <div class="roundedTwo">
                                                <input type="checkbox" value="None" id="signer-selected-{{$index}}-cbx" name="signer-selected-{{$index}}-cbx" ng-checked="signer.IsSelected" disabled="disabled" />
                                                <label for="signer-selected-{{$index}}-cbx"></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- signer -->
                                </li>
                                <!-- col-->
                            </ul>
                            <!-- row-->
                        </div>
                        <!-- modal body -->
                    </div>
                    <!-- modal content -->
                </div>
                <!-- modal dialog -->
            </div>
            <!-- modal -->
            <!-- end select-signer-modal -->
            <!-- /Main Content -->
        </div>
    </div>

    {% endverbatim %}
    <script>
        var masterIndxId = {{ master_index_id }};
        var dealerId = 0;
        var apiUri = '/api/doccenter/';
        var ajaxTimeout = 0;
    </script>

    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="/static/js/custom/jquery.ellipsis.js"></script>
    <script src="/static/js/custom/jquery.pluralize.js"></script>
    <script src="/static/js/angular/angular.min.js"></script>
    <script src="/static/js/custom/webviewbridge.js"></script>
    <script src="/static/js/custom/docslist/main.js"></script>
    <script src="/static/js/custom/docslist/controllers.js"></script>

    <script src="/static/js/bootstrap/bootstrap.min.js"></script>
</body>
</html>
